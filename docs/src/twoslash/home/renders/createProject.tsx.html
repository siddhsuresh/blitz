<pre class="shiki light-plus twoslash lsp" style="background-color: #FFFFFF; color: #000000"><div class="language-id">tsx</div><div class='code-container'><code><div class='line'><span style="color: #008000">//@filename: src/projects/mutations/createProject</span></div><div class='line'><span style="color: #008000">// ---- ON THE SERVER ----</span></div><div class='line'><span style="color: #008000">// app/projects/mutations/createProject.ts</span></div><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> {</span><span style="color: #001080"><data-lsp lsp='(alias) const resolver: {&#10;    pipe: typeof pipe;&#10;    zod: typeof zod;&#10;    authorize: ResolverAuthorize;&#10;}&#10;import resolver' >resolver</data-lsp></span><span style="color: #000000">} </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"@blitzjs/rpc"</span></div><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #001080"><data-lsp lsp='import db' >db</data-lsp></span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515"><data-err>&quot;db&quot;</data-err></span></div><span class="error"><span>Cannot find module 'db' or its corresponding type declarations.</span><span class="code">2307</span></span><span class="error-behind">Cannot find module 'db' or its corresponding type declarations.</span><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #0000FF">*</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #001080"><data-lsp lsp='import z' >z</data-lsp></span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"zod"</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #008000">// This provides runtime validation + type safety</span></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1"><data-lsp lsp='const CreateProject: z.ZodObject&lt;{&#10;    name: z.ZodString;&#10;}, "strip", z.ZodTypeAny, {&#10;    name: string;&#10;}, {&#10;    name: string;&#10;}>' >CreateProject</data-lsp></span><span style="color: #000000"> = </span><span style="color: #001080"><data-lsp lsp='import z' >z</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='(alias) object&lt;{&#10;    name: z.ZodString;&#10;}>(shape: {&#10;    name: z.ZodString;&#10;}, params?: z.RawCreateParams): z.ZodObject&lt;{&#10;    name: z.ZodString;&#10;}, "strip", z.ZodTypeAny, {&#10;    name: string;&#10;}, {&#10;    name: string;&#10;}>&#10;export object' >object</data-lsp></span><span style="color: #000000">({</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080"><data-lsp lsp='(property) name: z.ZodString' >name</data-lsp>:</span><span style="color: #000000"> </span><span style="color: #001080"><data-lsp lsp='import z' >z</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='(alias) string(params?: ({&#10;    errorMap?: z.ZodErrorMap | undefined;&#10;    invalid_type_error?: string | undefined;&#10;    required_error?: string | undefined;&#10;    description?: string | undefined;&#10;} &amp; {&#10;    coerce?: true | undefined;&#10;}) | undefined): z.ZodString&#10;export string' >string</data-lsp></span><span style="color: #000000">().</span><span style="color: #795E26"><data-lsp lsp='(method) ZodString.min(minLength: number, message?: errorUtil.ErrMessage | undefined): z.ZodString' >min</data-lsp></span><span style="color: #000000">(</span><span style="color: #098658">3</span><span style="color: #000000">),</span></div><div class='line'><span style="color: #000000">})</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #267F99"><data-lsp lsp='type CreateProjectInput = {&#10;    name: string;&#10;}' >CreateProjectInput</data-lsp></span><span style="color: #000000"> = </span><span style="color: #267F99"><data-lsp lsp='import z' >z</data-lsp></span><span style="color: #000000">.</span><span style="color: #267F99"><data-lsp lsp='(alias) type infer&lt;T extends ZodType&lt;any, any, any>> = T["_output"]&#10;export infer' >infer</data-lsp></span><span style="color: #000000">&lt;</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080"><data-lsp lsp='const CreateProject: z.ZodObject&lt;{&#10;    name: z.ZodString;&#10;}, "strip", z.ZodTypeAny, {&#10;    name: string;&#10;}, {&#10;    name: string;&#10;}>' >CreateProject</data-lsp></span><span style="color: #000000">&gt;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #008000">// resolver.pipe is a functional pipe</span></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #AF00DB">default</span><span style="color: #000000"> </span><span style="color: #001080"><data-lsp lsp='(alias) const resolver: {&#10;    pipe: typeof pipe;&#10;    zod: typeof zod;&#10;    authorize: ResolverAuthorize;&#10;}&#10;import resolver' >resolver</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='(property) pipe: &lt;{&#10;    name: string;&#10;}, Promise&lt;{&#10;    name: string;&#10;}>, {&#10;    name: string;&#10;}, Promise&lt;any>, Ctx, Ctx, AuthenticatedMiddlewareCtx, AuthenticatedMiddlewareCtx>(ab: PipeFn&lt;...>, bc: PipeFn&lt;...>, cd: PipeFn&lt;...>) => (input: {&#10;    ...;&#10;}, ctx: Ctx) => Promise&lt;...> (+11 overloads)' >pipe</data-lsp></span><span style="color: #000000">(</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Validate the input data</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080"><data-lsp lsp='(alias) const resolver: {&#10;    pipe: typeof pipe;&#10;    zod: typeof zod;&#10;    authorize: ResolverAuthorize;&#10;}&#10;import resolver' >resolver</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='(property) zod: &lt;z.ZodObject&lt;{&#10;    name: z.ZodString;&#10;}, "strip", z.ZodTypeAny, {&#10;    name: string;&#10;}, {&#10;    name: string;&#10;}>, {&#10;    name: string;&#10;}, {&#10;    name: string;&#10;}>(schema: z.ZodObject&lt;{&#10;    name: z.ZodString;&#10;}, "strip", z.ZodTypeAny, {&#10;    ...;&#10;}, {&#10;    ...;&#10;}>) => (input: {&#10;    ...;&#10;}) => Promise&lt;...> (+2 overloads)' >zod</data-lsp></span><span style="color: #000000">(</span><span style="color: #001080"><data-lsp lsp='const CreateProject: z.ZodObject&lt;{&#10;    name: z.ZodString;&#10;}, "strip", z.ZodTypeAny, {&#10;    name: string;&#10;}, {&#10;    name: string;&#10;}>' >CreateProject</data-lsp></span><span style="color: #000000">),</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Ensure user is logged in</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080"><data-lsp lsp='(alias) const resolver: {&#10;    pipe: typeof pipe;&#10;    zod: typeof zod;&#10;    authorize: ResolverAuthorize;&#10;}&#10;import resolver' >resolver</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='(property) authorize: ResolverAuthorize&#10;&lt;{&#10;    name: string;&#10;}, Ctx>(...args: unknown[]) => (input: {&#10;    name: string;&#10;}, ctx: Ctx) => ResultWithContext&lt;{&#10;    name: string;&#10;}, AuthenticatedMiddlewareCtx>' >authorize</data-lsp></span><span style="color: #000000">(),</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Perform business logic</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">async</span><span style="color: #000000"> (</span><span style="color: #001080"><data-lsp lsp='(parameter) input: {&#10;    name: string;&#10;}' >input</data-lsp></span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1"><data-lsp lsp='const project: any' >project</data-lsp></span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080"><data-lsp lsp='import db' >db</data-lsp></span><span style="color: #000000">.</span><span style="color: #001080"><data-lsp lsp='any' >project</data-lsp></span><span style="color: #000000">.</span><span style="color: #795E26"><data-lsp lsp='any' >create</data-lsp></span><span style="color: #000000">({</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #001080"><data-lsp lsp='(property) data: {&#10;    name: string;&#10;}' >data</data-lsp>:</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">        </span><span style="color: #001080"><data-lsp lsp='(property) name: string' >name</data-lsp>:</span><span style="color: #000000"> </span><span style="color: #001080"><data-lsp lsp='(parameter) input: {&#10;    name: string;&#10;}' >input</data-lsp></span><span style="color: #000000">.</span><span style="color: #001080"><data-lsp lsp='(property) name: string' >name</data-lsp></span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #267F99">string</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">      },</span></div><div class='line'><span style="color: #000000">    })</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080"><data-lsp lsp='const project: any' >project</data-lsp></span></div><div class='line'><span style="color: #000000">  },</span></div><div class='line'><span style="color: #000000">)</span></div><div class='line'>&nbsp;</div></code></div></pre>